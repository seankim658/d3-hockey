<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>D3 Hockey - Examples & Documentation</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        line-height: 1.6;
        color: #333;
        background: #f8f9fa;
      }
      .header {
        background: linear-gradient(135deg, #003e7e 0%, #c8102e 100%);
        color: white;
        padding: 3rem 2rem;
        text-align: center;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .header h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        font-weight: 700;
      }
      .header p {
        font-size: 1.1rem;
        opacity: 0.95;
        max-width: 800px;
        margin: 0 auto;
      }
      .container {
        display: flex;
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem;
        gap: 2rem;
      }
      .main-content {
        flex: 1;
        min-width: 0;
      }
      .sidebar {
        width: 280px;
        flex-shrink: 0;
      }
      .sidebar-inner {
        position: sticky;
        top: 2rem;
        background: white;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        max-height: calc(100vh - 4rem);
        overflow-y: auto;
      }
      .sidebar h2 {
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: #666;
        margin-bottom: 1rem;
        font-weight: 600;
      }
      .toc {
        list-style: none;
      }
      .toc-section {
        margin-bottom: 1.5rem;
      }
      .toc-section-title {
        font-weight: 600;
        color: #003e7e;
        margin-bottom: 0.5rem;
        font-size: 0.95rem;
      }
      .toc-section-title a {
        color: inherit;
        text-decoration: none;
        display: block;
        padding: 0.4rem 0;
        transition: color 0.2s;
      }
      .toc-section-title a:hover {
        color: #c8102e;
      }
      .toc-items {
        list-style: none;
        padding-left: 1rem;
        border-left: 2px solid #e9ecef;
      }
      .toc-items li {
        margin-bottom: 0.25rem;
      }
      .toc-items a {
        color: #666;
        text-decoration: none;
        display: block;
        padding: 0.3rem 0.5rem;
        font-size: 0.9rem;
        border-radius: 4px;
        transition: all 0.2s;
      }
      .toc-items a:hover {
        color: #003e7e;
        background: #f8f9fa;
      }
      .toc-items a.active {
        color: #003e7e;
        background: #e7f3ff;
        font-weight: 500;
      }
      .category {
        margin-bottom: 4rem;
      }
      .category-title {
        font-size: 2rem;
        color: #003e7e;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 3px solid #c8102e;
      }
      .category-description {
        color: #666;
        margin-bottom: 2rem;
        font-size: 1.05rem;
      }
      .example {
        background: white;
        border-radius: 8px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        scroll-margin-top: 2rem;
      }
      .example-header {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 1rem;
      }
      .example-title {
        font-size: 1.4rem;
        color: #333;
        font-weight: 600;
      }
      .example-description {
        color: #666;
        margin-bottom: 1.5rem;
        font-size: 1rem;
      }
      .example-viz {
        margin-bottom: 1.5rem;
        border: 1px solid #e9ecef;
        border-radius: 4px;
        overflow: hidden;
      }
      .code-section {
        border-top: 1px solid #e9ecef;
        padding-top: 1rem;
      }
      .code-toggle {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        padding: 0.75rem 1rem;
        cursor: pointer;
        transition: all 0.2s;
        user-select: none;
      }
      .code-toggle:hover {
        background: #e9ecef;
      }
      .code-toggle-icon {
        transition: transform 0.2s;
        font-size: 0.875rem;
      }
      .code-toggle.expanded .code-toggle-icon {
        transform: rotate(90deg);
      }
      .code-toggle-label {
        font-weight: 500;
        color: #495057;
        font-size: 0.9rem;
      }
      .code-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
      }
      .code-content.expanded {
        max-height: 2000px;
        transition: max-height 0.5s ease-in;
      }
      .code-content pre {
        margin: 1rem 0 0 0;
        background: #282c34;
        color: #abb2bf;
        padding: 1.5rem;
        border-radius: 4px;
        overflow-x: auto;
        font-family: Monaco, "Courier New", monospace;
        font-size: 0.875rem;
        line-height: 1.6;
      }
      .keyword {
        color: #c678dd;
      }
      .function {
        color: #61afef;
      }
      .string {
        color: #98c379;
      }
      .number {
        color: #d19a66;
      }
      .comment {
        color: #5c6370;
        font-style: italic;
      }
      html {
        scroll-behavior: smooth;
      }
      @media (max-width: 1024px) {
        .container {
          flex-direction: column;
        }
        .sidebar {
          width: 100%;
          order: -1;
        }
        .sidebar-inner {
          position: static;
          max-height: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>üèí D3 Hockey</h1>
      <p>
        A powerful D3.js library for creating beautiful, interactive hockey
        visualizations with NHL rinks, shot charts, and event mapping.
      </p>
    </div>

    <div class="container">
      <main class="main-content">
        <section id="basic-usage" class="category">
          <h2 class="category-title">Basic Usage</h2>
          <p class="category-description">
            Get started with simple rink rendering and basic customization
            options.
          </p>

          <article id="simple-rink" class="example">
            <div class="example-header">
              <h3 class="example-title">Simple Rink</h3>
            </div>
            <p class="example-description">
              Create a basic NHL regulation rink with default styling in just
              one line of code.
            </p>
            <div class="example-viz"><div id="viz-simple-rink"></div></div>
            <div class="code-section">
              <div class="code-toggle" onclick="toggleCode(this)">
                <span class="code-toggle-icon">‚ñ∂</span>
                <span class="code-toggle-label">View Code</span>
              </div>
              <div class="code-content">
                <pre><code><span class="keyword">new</span> <span class="function">Rink</span>(<span class="string">'#viz-simple-rink'</span>)
  .<span class="function">width</span>(<span class="number">800</span>)
  .<span class="function">height</span>(<span class="number">340</span>)
  .<span class="function">render</span>();</code></pre>
              </div>
            </div>
          </article>

          <article id="custom-colors" class="example">
            <div class="example-header">
              <h3 class="example-title">Custom Colors</h3>
            </div>
            <p class="example-description">
              Customize the rink appearance with team colors or your preferred
              color scheme.
            </p>
            <div class="example-viz"><div id="viz-custom-colors"></div></div>
            <div class="code-section">
              <div class="code-toggle" onclick="toggleCode(this)">
                <span class="code-toggle-icon">‚ñ∂</span>
                <span class="code-toggle-label">View Code</span>
              </div>
              <div class="code-content">
                <pre><code><span class="keyword">new</span> <span class="function">Rink</span>(<span class="string">'#viz-custom-colors'</span>)
  .<span class="function">width</span>(<span class="number">800</span>)
  .<span class="function">height</span>(<span class="number">340</span>)
  .<span class="function">colors</span>({
    ice: <span class="string">'#ffffff'</span>,
    boards: <span class="string">'#2c3e50'</span>,
    redLine: <span class="string">'#e74c3c'</span>,
    blueLine: <span class="string">'#3498db'</span>
  })
  .<span class="function">render</span>();</code></pre>
              </div>
            </div>
          </article>

          <article id="custom-sizing" class="example">
            <div class="example-header">
              <h3 class="example-title">Custom Sizing</h3>
            </div>
            <p class="example-description">
              Adjust dimensions and padding to fit your layout requirements.
            </p>
            <div class="example-viz"><div id="viz-custom-sizing"></div></div>
            <div class="code-section">
              <div class="code-toggle" onclick="toggleCode(this)">
                <span class="code-toggle-icon">‚ñ∂</span>
                <span class="code-toggle-label">View Code</span>
              </div>
              <div class="code-content">
                <pre><code><span class="keyword">new</span> <span class="function">Rink</span>(<span class="string">'#viz-custom-sizing'</span>)
  .<span class="function">width</span>(<span class="number">600</span>)
  .<span class="function">height</span>(<span class="number">255</span>)
  .<span class="function">padding</span>(<span class="number">10</span>)
  .<span class="function">render</span>();</code></pre>
              </div>
            </div>
          </article>
        </section>

        <section id="event-layer" class="category">
          <h2 class="category-title">Event Layer</h2>
          <p class="category-description">
            Visualize hockey events like shots, goals, hits, and blocks with
            customizable symbols, colors, and sizes.
          </p>

          <article id="basic-shot-chart" class="example">
            <div class="example-header">
              <h3 class="example-title">Basic Shot Chart</h3>
            </div>
            <p class="example-description">
              Plot shot locations with simple circles‚Äîthe foundation of hockey
              analytics visualization.
            </p>
            <div class="example-viz"><div id="viz-basic-shots"></div></div>
            <div class="code-section">
              <div class="code-toggle" onclick="toggleCode(this)">
                <span class="code-toggle-icon">‚ñ∂</span>
                <span class="code-toggle-label">View Code</span>
              </div>
              <div class="code-content">
                <pre><code><span class="keyword">const</span> shots = [
  { coordinates: { x: <span class="number">70</span>, y: <span class="number">15</span> }, player: <span class="string">'McDavid'</span> },
  { coordinates: { x: <span class="number">65</span>, y: <span class="number">-10</span> }, player: <span class="string">'Draisaitl'</span> },
  { coordinates: { x: <span class="number">80</span>, y: <span class="number">0</span> }, player: <span class="string">'Hyman'</span> }
];

<span class="keyword">new</span> <span class="function">Rink</span>(<span class="string">'#viz-basic-shots'</span>)
  .<span class="function">width</span>(<span class="number">800</span>)
  .<span class="function">height</span>(<span class="number">340</span>)
  .<span class="function">render</span>()
  .<span class="function">addEvents</span>(shots, {
    id: <span class="string">'shots'</span>,
    color: <span class="string">'#FF4C00'</span>,
    radius: <span class="number">5</span>
  });</code></pre>
              </div>
            </div>
          </article>

          <article id="symbol-types" class="example">
            <div class="example-header">
              <h3 class="example-title">Different Symbol Types</h3>
            </div>
            <p class="example-description">
              Use different symbols to distinguish between event types‚Äîgoals as
              stars, shots as circles, and blocks as crosses.
            </p>
            <div class="example-viz"><div id="viz-symbol-types"></div></div>
            <div class="code-section">
              <div class="code-toggle" onclick="toggleCode(this)">
                <span class="code-toggle-icon">‚ñ∂</span>
                <span class="code-toggle-label">View Code</span>
              </div>
              <div class="code-content">
                <pre><code><span class="keyword">const</span> events = [
  { coordinates: { x: <span class="number">85</span>, y: <span class="number">5</span> }, type: <span class="string">'goal'</span>, player: <span class="string">'Matthews'</span> },
  { coordinates: { x: <span class="number">75</span>, y: <span class="number">-8</span> }, type: <span class="string">'shot'</span>, player: <span class="string">'Marner'</span> },
  { coordinates: { x: <span class="number">70</span>, y: <span class="number">12</span> }, type: <span class="string">'shot'</span>, player: <span class="string">'Nylander'</span> },
  { coordinates: { x: <span class="number">60</span>, y: <span class="number">-15</span> }, type: <span class="string">'blocked'</span>, player: <span class="string">'Tavares'</span> }
];

<span class="keyword">new</span> <span class="function">Rink</span>(<span class="string">'#viz-symbol-types'</span>)
  .<span class="function">width</span>(<span class="number">800</span>)
  .<span class="function">height</span>(<span class="number">340</span>)
  .<span class="function">render</span>()
  .<span class="function">addEvents</span>(events, {
    id: <span class="string">'events'</span>,
    <span class="comment">// Symbol is automatically determined by event type</span>
    color: (d) => d.type === <span class="string">'goal'</span> ? <span class="string">'#00ff00'</span> : 
                  d.type === <span class="string">'blocked'</span> ? <span class="string">'#ff6600'</span> : <span class="string">'#0088ff'</span>,
    symbolSize: <span class="number">100</span>
  });</code></pre>
              </div>
            </div>
          </article>

          <article id="dynamic-sizing" class="example">
            <div class="example-header">
              <h3 class="example-title">Dynamic Sizing</h3>
            </div>
            <p class="example-description">
              Size events based on data properties‚Äîlarger circles for higher
              shot danger or expected goals.
            </p>
            <div class="example-viz"><div id="viz-dynamic-sizing"></div></div>
            <div class="code-section">
              <div class="code-toggle" onclick="toggleCode(this)">
                <span class="code-toggle-icon">‚ñ∂</span>
                <span class="code-toggle-label">View Code</span>
              </div>
              <div class="code-content">
                <pre><code><span class="keyword">const</span> shotsWithDanger = [
  { coordinates: { x: <span class="number">85</span>, y: <span class="number">2</span> }, xG: <span class="number">0.35</span>, player: <span class="string">'Kane'</span> },
  { coordinates: { x: <span class="number">70</span>, y: <span class="number">15</span> }, xG: <span class="number">0.12</span>, player: <span class="string">'DeBrincat'</span> },
  { coordinates: { x: <span class="number">80</span>, y: <span class="number">-5</span> }, xG: <span class="number">0.28</span>, player: <span class="string">'Toews'</span> },
  { coordinates: { x: <span class="number">55</span>, y: <span class="number">8</span> }, xG: <span class="number">0.05</span>, player: <span class="string">'Johnson'</span> }
];

<span class="keyword">new</span> <span class="function">Rink</span>(<span class="string">'#viz-dynamic-sizing'</span>)
  .<span class="function">width</span>(<span class="number">800</span>)
  .<span class="function">height</span>(<span class="number">340</span>)
  .<span class="function">render</span>()
  .<span class="function">addEvents</span>(shotsWithDanger, {
    id: <span class="string">'xg-shots'</span>,
    color: <span class="string">'#c8102e'</span>,
    radius: (d) => <span class="number">3</span> + (d.xG * <span class="number">20</span>), <span class="comment">// Scale by xG</span>
    opacity: <span class="number">0.7</span>
  });</code></pre>
              </div>
            </div>
          </article>

          <article id="color-by-data" class="example">
            <div class="example-header">
              <h3 class="example-title">Color by Data</h3>
            </div>
            <p class="example-description">
              Use color gradients to represent continuous data like shot danger
              or distance from goal.
            </p>
            <div class="example-viz"><div id="viz-color-by-data"></div></div>
            <div class="code-section">
              <div class="code-toggle" onclick="toggleCode(this)">
                <span class="code-toggle-icon">‚ñ∂</span>
                <span class="code-toggle-label">View Code</span>
              </div>
              <div class="code-content">
                <pre><code><span class="keyword">import</span> * <span class="keyword">as</span> d3 <span class="keyword">from</span> <span class="string">'d3'</span>;

<span class="keyword">const</span> colorScale = d3.<span class="function">scaleSequential</span>(d3.interpolateYlOrRd)
  .<span class="function">domain</span>([<span class="number">0</span>, <span class="number">0.4</span>]);

<span class="keyword">const</span> shots = [
  { coordinates: { x: <span class="number">85</span>, y: <span class="number">3</span> }, xG: <span class="number">0.32</span>, player: <span class="string">'Pastrnak'</span> },
  { coordinates: { x: <span class="number">75</span>, y: <span class="number">-12</span> }, xG: <span class="number">0.15</span>, player: <span class="string">'Marchand'</span> },
  { coordinates: { x: <span class="number">88</span>, y: <span class="number">-2</span> }, xG: <span class="number">0.38</span>, player: <span class="string">'Bergeron'</span> },
  { coordinates: { x: <span class="number">65</span>, y: <span class="number">18</span> }, xG: <span class="number">0.08</span>, player: <span class="string">'Coyle'</span> }
];

<span class="keyword">new</span> <span class="function">Rink</span>(<span class="string">'#viz-color-by-data'</span>)
  .<span class="function">width</span>(<span class="number">800</span>)
  .<span class="function">height</span>(<span class="number">340</span>)
  .<span class="function">render</span>()
  .<span class="function">addEvents</span>(shots, {
    id: <span class="string">'heat-shots'</span>,
    color: (d) => <span class="function">colorScale</span>(d.xG),
    radius: <span class="number">6</span>,
    stroke: <span class="string">'#fff'</span>,
    strokeWidth: <span class="number">1.5</span>
  });</code></pre>
              </div>
            </div>
          </article>

          <article id="custom-tooltips" class="example">
            <div class="example-header">
              <h3 class="example-title">Custom Tooltips</h3>
            </div>
            <p class="example-description">
              Create rich, informative tooltips with custom formatting and
              styling.
            </p>
            <div class="example-viz"><div id="viz-custom-tooltips"></div></div>
            <div class="code-section">
              <div class="code-toggle" onclick="toggleCode(this)">
                <span class="code-toggle-icon">‚ñ∂</span>
                <span class="code-toggle-label">View Code</span>
              </div>
              <div class="code-content">
                <pre><code><span class="keyword">const</span> detailedShots = [
  {
    coordinates: { x: <span class="number">82</span>, y: <span class="number">8</span> },
    player: <span class="string">'Ovechkin'</span>,
    shotType: <span class="string">'Wrist Shot'</span>,
    result: <span class="string">'Goal'</span>,
    speed: <span class="number">98</span>
  },
  {
    coordinates: { x: <span class="number">68</span>, y: <span class="number">-15</span> },
    player: <span class="string">'Backstrom'</span>,
    shotType: <span class="string">'Snap Shot'</span>,
    result: <span class="string">'Save'</span>,
    speed: <span class="number">85</span>
  }
];

<span class="keyword">new</span> <span class="function">Rink</span>(<span class="string">'#viz-custom-tooltips'</span>)
  .<span class="function">width</span>(<span class="number">800</span>)
  .<span class="function">height</span>(<span class="number">340</span>)
  .<span class="function">render</span>()
  .<span class="function">addEvents</span>(detailedShots, {
    id: <span class="string">'detailed-shots'</span>,
    color: (d) => d.result === <span class="string">'Goal'</span> ? <span class="string">'#00ff00'</span> : <span class="string">'#0088ff'</span>,
    radius: <span class="number">5</span>,
    tooltip: (d) => <span class="string">`
      &lt;strong&gt;${d.player}&lt;/strong&gt;&lt;br/&gt;
      ${d.shotType} - ${d.result}&lt;br/&gt;
      Speed: ${d.speed} MPH&lt;br/&gt;
      Location: (${d.coordinates.x.toFixed(1)}, ${d.coordinates.y.toFixed(1)})
    `</span>
  });</code></pre>
              </div>
            </div>
          </article>

          <article id="animation-control" class="example">
            <div class="example-header">
              <h3 class="example-title">Animation Control</h3>
            </div>
            <p class="example-description">
              Control animation timing and easing for smooth, professional
              transitions.
            </p>
            <div class="example-viz">
              <button
                id="replay-animation"
                style="
                  margin-bottom: 10px;
                  padding: 8px 16px;
                  background: #003e7e;
                  color: white;
                  border: none;
                  border-radius: 4px;
                  cursor: pointer;
                "
              >
                Replay Animation
              </button>
              <div id="viz-animation"></div>
            </div>
            <div class="code-section">
              <div class="code-toggle" onclick="toggleCode(this)">
                <span class="code-toggle-icon">‚ñ∂</span>
                <span class="code-toggle-label">View Code</span>
              </div>
              <div class="code-content">
                <pre><code><span class="keyword">const</span> shots = [
  { coordinates: { x: <span class="number">75</span>, y: <span class="number">10</span> }, player: <span class="string">'Crosby'</span> },
  { coordinates: { x: <span class="number">82</span>, y: <span class="number">-5</span> }, player: <span class="string">'Malkin'</span> },
  { coordinates: { x: <span class="number">68</span>, y: <span class="number">12</span> }, player: <span class="string">'Rust'</span> }
];

<span class="keyword">new</span> <span class="function">Rink</span>(<span class="string">'#viz-animation'</span>)
  .<span class="function">width</span>(<span class="number">800</span>)
  .<span class="function">height</span>(<span class="number">340</span>)
  .<span class="function">render</span>()
  .<span class="function">addEvents</span>(shots, {
    id: <span class="string">'animated-shots'</span>,
    color: <span class="string">'#FCB514'</span>,
    radius: <span class="number">5</span>,
    animate: <span class="keyword">true</span>,
    animationDuration: <span class="number">800</span>,
    animationEasing: <span class="string">'easeElasticOut'</span>
  });</code></pre>
              </div>
            </div>
          </article>

          <article id="multiple-layers" class="example">
            <div class="example-header">
              <h3 class="example-title">Multiple Event Layers</h3>
            </div>
            <p class="example-description">
              Combine multiple event layers to show different data sets
              simultaneously‚Äîhome vs. away, different periods, or multiple
              players.
            </p>
            <div class="example-viz"><div id="viz-multiple-layers"></div></div>
            <div class="code-section">
              <div class="code-toggle" onclick="toggleCode(this)">
                <span class="code-toggle-icon">‚ñ∂</span>
                <span class="code-toggle-label">View Code</span>
              </div>
              <div class="code-content">
                <pre><code><span class="keyword">const</span> homeShots = [
  { coordinates: { x: <span class="number">75</span>, y: <span class="number">8</span> }, team: <span class="string">'home'</span> },
  { coordinates: { x: <span class="number">82</span>, y: <span class="number">-3</span> }, team: <span class="string">'home'</span> },
  { coordinates: { x: <span class="number">68</span>, y: <span class="number">15</span> }, team: <span class="string">'home'</span> }
];

<span class="keyword">const</span> awayShots = [
  { coordinates: { x: <span class="number">-78</span>, y: <span class="number">-10</span> }, team: <span class="string">'away'</span> },
  { coordinates: { x: <span class="number">-85</span>, y: <span class="number">5</span> }, team: <span class="string">'away'</span> },
  { coordinates: { x: <span class="number">-70</span>, y: <span class="number">12</span> }, team: <span class="string">'away'</span> }
];

<span class="keyword">const</span> rink = <span class="keyword">new</span> <span class="function">Rink</span>(<span class="string">'#viz-multiple-layers'</span>)
  .<span class="function">width</span>(<span class="number">800</span>)
  .<span class="function">height</span>(<span class="number">340</span>)
  .<span class="function">render</span>();

<span class="comment">// Add home team shots</span>
rink.<span class="function">addEvents</span>(homeShots, {
  id: <span class="string">'home'</span>,
  color: <span class="string">'#003e7e'</span>,
  radius: <span class="number">5</span>,
  opacity: <span class="number">0.7</span>
});

<span class="comment">// Add away team shots</span>
rink.<span class="function">addEvents</span>(awayShots, {
  id: <span class="string">'away'</span>,
  color: <span class="string">'#c8102e'</span>,
  radius: <span class="number">5</span>,
  opacity: <span class="number">0.7</span>
});</code></pre>
              </div>
            </div>
          </article>
        </section>
      </main>

      <aside class="sidebar">
        <div class="sidebar-inner">
          <h2>Table of Contents</h2>
          <nav class="toc">
            <ul>
              <li class="toc-section">
                <div class="toc-section-title">
                  <a href="#basic-usage">Basic Usage</a>
                </div>
                <ul class="toc-items">
                  <li><a href="#simple-rink">Simple Rink</a></li>
                  <li><a href="#custom-colors">Custom Colors</a></li>
                  <li><a href="#custom-sizing">Custom Sizing</a></li>
                </ul>
              </li>
              <li class="toc-section">
                <div class="toc-section-title">
                  <a href="#event-layer">Event Layer</a>
                </div>
                <ul class="toc-items">
                  <li><a href="#basic-shot-chart">Basic Shot Chart</a></li>
                  <li><a href="#symbol-types">Symbol Types</a></li>
                  <li><a href="#dynamic-sizing">Dynamic Sizing</a></li>
                  <li><a href="#color-by-data">Color by Data</a></li>
                  <li><a href="#custom-tooltips">Custom Tooltips</a></li>
                  <li><a href="#animation-control">Animation Control</a></li>
                  <li><a href="#multiple-layers">Multiple Layers</a></li>
                </ul>
              </li>
            </ul>
          </nav>
        </div>
      </aside>
    </div>

    <script type="module">
      import { Rink } from "../../src/index.ts";
      import * as d3 from "d3";

      // Simple Rink
      new Rink("#viz-simple-rink").width(800).height(340).render();

      // Custom Colors
      new Rink("#viz-custom-colors")
        .width(800)
        .height(340)
        .colors({
          ice: "#ffffff",
          boards: "#2c3e50",
          redLine: "#e74c3c",
          blueLine: "#3498db",
        })
        .render();

      // Custom Sizing
      new Rink("#viz-custom-sizing")
        .width(600)
        .height(255)
        .padding(10)
        .render();

      // Basic Shot Chart
      const basicShots = [
        { coordinates: { x: 70, y: 15 }, player: "McDavid" },
        { coordinates: { x: 65, y: -10 }, player: "Draisaitl" },
        { coordinates: { x: 80, y: 0 }, player: "Hyman" },
      ];
      new Rink("#viz-basic-shots")
        .width(800)
        .height(340)
        .render()
        .addEvents(basicShots, { id: "shots", color: "#FF4C00", radius: 5 });

      // Symbol Types
      const symbolEvents = [
        { coordinates: { x: 85, y: 5 }, type: "goal", player: "Matthews" },
        { coordinates: { x: 75, y: -8 }, type: "shot", player: "Marner" },
        { coordinates: { x: 70, y: 12 }, type: "shot", player: "Nylander" },
        { coordinates: { x: 60, y: -15 }, type: "blocked", player: "Tavares" },
      ];
      new Rink("#viz-symbol-types")
        .width(800)
        .height(340)
        .render()
        .addEvents(symbolEvents, {
          id: "events",
          color: (d) =>
            d.type === "goal"
              ? "#00ff00"
              : d.type === "blocked"
                ? "#ff6600"
                : "#0088ff",
          symbolSize: 100,
        });

      // Dynamic Sizing
      const shotsWithDanger = [
        { coordinates: { x: 85, y: 2 }, xG: 0.35, player: "Kane" },
        { coordinates: { x: 70, y: 15 }, xG: 0.12, player: "DeBrincat" },
        { coordinates: { x: 80, y: -5 }, xG: 0.28, player: "Toews" },
        { coordinates: { x: 55, y: 8 }, xG: 0.05, player: "Johnson" },
      ];
      new Rink("#viz-dynamic-sizing")
        .width(800)
        .height(340)
        .render()
        .addEvents(shotsWithDanger, {
          id: "xg-shots",
          color: "#c8102e",
          radius: (d) => 3 + d.xG * 20,
          opacity: 0.7,
        });

      // Color by Data
      const colorScale = d3
        .scaleSequential(d3.interpolateYlOrRd)
        .domain([0, 0.4]);

      const heatShots = [
        { coordinates: { x: 85, y: 3 }, xG: 0.32, player: "Pastrnak" },
        { coordinates: { x: 75, y: -12 }, xG: 0.15, player: "Marchand" },
        { coordinates: { x: 88, y: -2 }, xG: 0.38, player: "Bergeron" },
        { coordinates: { x: 65, y: 18 }, xG: 0.08, player: "Coyle" },
      ];
      new Rink("#viz-color-by-data")
        .width(800)
        .height(340)
        .render()
        .addEvents(heatShots, {
          id: "heat-shots",
          color: (d) => colorScale(d.xG),
          radius: 6,
          stroke: "#fff",
          strokeWidth: 1.5,
        });

      // Custom Tooltips
      const detailedShots = [
        {
          coordinates: { x: 82, y: 8 },
          player: "Ovechkin",
          shotType: "Wrist Shot",
          result: "Goal",
          speed: 98,
        },
        {
          coordinates: { x: 68, y: -15 },
          player: "Backstrom",
          shotType: "Snap Shot",
          result: "Save",
          speed: 85,
        },
      ];
      new Rink("#viz-custom-tooltips")
        .width(800)
        .height(340)
        .render()
        .addEvents(detailedShots, {
          id: "detailed-shots",
          color: (d) => (d.result === "Goal" ? "#00ff00" : "#0088ff"),
          radius: 5,
          tooltip: (d) => `
            <strong>${d.player}</strong><br/>
            ${d.shotType} - ${d.result}<br/>
            Speed: ${d.speed} MPH<br/>
            Location: (${d.coordinates.x.toFixed(1)}, ${d.coordinates.y.toFixed(1)})
          `,
        });

      // Animation Control
      const animatedShots = [
        { coordinates: { x: 75, y: 10 }, player: "Crosby" },
        { coordinates: { x: 82, y: -5 }, player: "Malkin" },
        { coordinates: { x: 68, y: 12 }, player: "Rust" },
      ];
      const animatedRink = new Rink("#viz-animation")
        .width(800)
        .height(340)
        .render();

      function playAnimation() {
        animatedRink.layerManager.removeLayer("animated-shots");

        animatedRink.addEvents(animatedShots, {
          id: "animated-shots",
          color: "#c8102e",
          radius: 6,
          animate: true,
          animationDuration: 1000,
          animationEasing: "easeElasticOut",
        });
      }
      playAnimation();
      document
        .getElementById("replay-animation")
        .addEventListener("click", playAnimation);

      // Multiple Layers
      const homeShots = [
        { coordinates: { x: 75, y: 8 }, team: "home" },
        { coordinates: { x: 82, y: -3 }, team: "home" },
        { coordinates: { x: 68, y: 15 }, team: "home" },
      ];

      const awayShots = [
        { coordinates: { x: -78, y: -10 }, team: "away" },
        { coordinates: { x: -85, y: 5 }, team: "away" },
        { coordinates: { x: -70, y: 12 }, team: "away" },
      ];

      const multiLayerRink = new Rink("#viz-multiple-layers")
        .width(800)
        .height(340)
        .render();

      multiLayerRink.addEvents(homeShots, {
        id: "home",
        color: "#003e7e",
        radius: 5,
        opacity: 0.7,
      });

      multiLayerRink.addEvents(awayShots, {
        id: "away",
        color: "#c8102e",
        radius: 5,
        opacity: 0.7,
      });
    </script>

    <script>
      function toggleCode(element) {
        element.classList.toggle("expanded");
        element.nextElementSibling.classList.toggle("expanded");
      }

      // TOC active state
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const id = entry.target.id;
              document.querySelectorAll(".toc-items a").forEach((link) => {
                link.classList.toggle(
                  "active",
                  link.getAttribute("href") === `#${id}`,
                );
              });
            }
          });
        },
        { rootMargin: "-20% 0px -70% 0px" },
      );

      document
        .querySelectorAll(".example")
        .forEach((el) => observer.observe(el));
    </script>
  </body>
</html>
